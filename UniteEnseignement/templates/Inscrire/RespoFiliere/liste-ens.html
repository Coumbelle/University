{% extends "../../UE/RespoFiliere/index1.html" %}

{% block content %}
{% load static %}
<style>
    form{
        background-color: rgb(41, 36, 36);
    }
    b{
        color:yellow;
    }
    td,th{
        margin-left: 5px;
    }
</style>
<br>
<br>
<br>
        <div class="table">
        <tr>
            </tr>
            
            <tr>
                <div class="cold-md-2">
                    
                    <form action="search" method="POST" id="recherche">
                        {% csrf_token %}
                        <div class="row">
                                <div class="form-group col-md-2">
                                    <input type="search" name="nom" class="form-control" style="margin-left: 30px;">
                                </div>&nbsp;&nbsp;
                                <div class="form-group col-md-2">
                                    <select class="custom-select d-block w-100" id="filiere"  name='filiere'>
                                        <option value="0" ><b>Filieres enseignées</b></option>
                                        {% for fil in filieres%}
                                        <option value="{{fil.id}}"><b>{{fil.nomFiliere}}</b></option>
                                        {% endfor %}
                                    </select>
                                </div>
                        </div>    
                        
                        <p style="color:white">{{text}}</p>
                    </form>    
                </div>
                
        <form method="POST">

            <fieldset>
            <br>
            <div class="col-12">
            <table class="table table-bordered  table-hover" > <br>
                <div class="cold-md-2"></div>
            <tr>
                <br>
                </tr>
                
                
                <tr class="bg-info">
                    <th style="color:#900C3F"><b>Nom</b></th>
                    <th style="color:#900C3F"><b>Prénom</b></th>
                    <th style="color:#900C3F"><b>Email</b></th>
                    <th style="color:#900C3F"><b>Filière</b></th>
                    <th style="color:#900C3F"><b>Modification</b></th>
                    
                </tr>
                {%  if enseignants.len == 1 %}
                
                <tr>
                    <td><b>{{enseignants.nom}}</b></td>
                    <td><b>{{enseignants.prenom}}</b></td>
                    <td><b>{{enseignants.email}}</b></td>
                    <td><b>#</b></td>
                    
                    <div class="form-group cold-md-2 ">
                    <td>    <a class="btn btn-primary" type="submit" href="{% url 'IupdateEns' enseignants.id %}">Modifier</a> </td>
                    </div>
                    
                    
                </tr>
                {% else %}
                {% for ens in enseignants %}
                <tr>
                    <td><b>{{ens.RespoFiliere.nom}}</b></td>
                    <td><b>{{ens.RespoFiliere.prenom}}</b></td>
                    <td><b>{{ens.RespoFiliere.email}}</b></td>
                    <td><b>{{ens.filiere.nomFiliere}}</b></td>
                    
                    <div class="form-group cold-md-2 ">
                    <td>    <a class="btn btn-primary" type="submit" href="{% url 'IupdateEns' ens.RespoFiliere.id %}">Modifier</a> </td>
                    </div>
                    
                    {%endfor%}
                </tr>
                {% endif %}
                
                <div class="form-group cold-md-2">
                    <td>
                        <a class="btn btn-primary" href="{% url 'IajoutEns'%}"><span class="fa fa-bullhorn" style="color:#4f4;">
                            </span> Ajouter </button>
                    </td>
                </div>
                <div class="form-group cold-md-2">
                    <td>
                        <a class="btn btn-warning" href="#">Quitter</a>
                    </td>            
                </div> 
                <div class="form-group cold-md-2">
                    <td>
                        <a class="btn btn-outline-success" href="{% url 'export_excel' %}">Format Excel</a>
                    </td>            
                </div>
                <div class="form-group cold-md-2">
                    <td>
                        <a class="btn btn-outline-primary" href="#">Format PDF</a>
                    </td>            
                </div>
                <div class="form-group cold-md-2">
                    <td>
                        <a class="btn btn-outline-primary" href="#">Format </a>
                    </td>            
                </div>
                </fieldset>
            </table>
            </form>
            </tr>
        </div>
    </div>
    {% block javascript%}
<script src="{% static 'js/jquery-3.6.0.js' %}"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $('#recherche').on('change', function(){
            $('#filiere').submit();
        })
    })

</script>
{% endblock %}
{% endblock %}  